
<div id="homeTop">
    <span style="float: left; margin: 10px; padding: 5px; border: black 1px solid;"><a style="color: black; text-decoration: none" href="/admin/tasks">Admin Panel</a></span>
    <span style="float: right; margin: 10px; padding: 5px; border: black 1px solid;"><a style="color: black; text-decoration: none" href="#" id="taskBtn">Employeee Panel</a></span>
</div>

<div id="homeBottom">
    <hr>
    <span style="float: center; margin: 10px; padding: 5px; border: black 1px solid;"><a style="color: black; text-decoration: none" href="/admin/tasks">Broadcast Panel</a></span>
</div>

<script>


    setTimeout(() => {
        var taskBtn = document.getElementById('taskBtn');
        var profileBtn = document.getElementById('profileBtn');
        profileBtn.href = '/profile/' + localStorage.getItem('userId'); 
        taskBtn.href = '/employee/tasks/' + localStorage.getItem('userId');
        console.log(localStorage.getItem('userId'));  
    }, 100);

    const homeBottom = document.getElementById('homeBottom');
    const ul = document.createElement('ul');
    fetch('/api/topBroadcasts').then(res => res.json()).then(data => {
        
        var li1 = document.createElement('li');
        li1.innerHTML = data[2].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[2].date.slice(0, 10) + '</span>';
        function fun1 () {
            if (li1.innerHTML === data[2].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[2].date.slice(0, 10) + '</span>') {
                li1.addEventListener('click', () => {
                    li1.innerHTML =data[2].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[2].date.slice(0, 10) + '</span>' + '<br>' + data[2].description;
                    fun1();
                })
            } else {
                li1.addEventListener('click', () => {
                    li1.innerHTML =data[2].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[2].date.slice(0, 10) + '</span>';
                    fun1();
                })
            }
        }


        var li2 = document.createElement('li');
        li2.innerHTML = data[1].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[1].date.slice(0, 10) + '</span>';
        function fun2 () {
            if (li2.innerHTML === data[1].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[1].date.slice(0, 10) + '</span>') {
                li2.addEventListener('click', () => {
                    li2.innerHTML = data[1].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[1].date.slice(0, 10) + '</span>' + '<br>' + data[1].description;
                    fun2();
                })
            } else {
                li2.addEventListener('click', () => {
                    li2.innerHTML = data[1].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[1].date.slice(0, 10) + '</span>';
                    fun2();
                })
            }
        }


        var li3 = document.createElement('li');
        li3.innerHTML = data[0].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[0].date.slice(0, 10) + '</span>';
        
        function fun3 () {
            if (li3.innerHTML === data[0].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[0].date.slice(0, 10) + '</span>') {
                li3.addEventListener('click', () => {
                    li3.innerHTML = data[0].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[0].date.slice(0, 10) + '</span>' + '<br>' + data[0].description;
                    fun3();
                })
            } else {
                li3.addEventListener('click', () => {
                    li3.innerHTML = data[0].title + '<span style="font-size: small; float:right; padding:4px;"> - ' + data[0].date.slice(0, 10) + '</span>';
                    fun3();
                })
            }
        }   


        fun1();
        fun2();
        fun3();
        ul.appendChild(li1);
        ul.appendChild(li2);
        ul.appendChild(li3);
        homeBottom.appendChild(ul);
    })


</script>


